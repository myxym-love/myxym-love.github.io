<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>myxym-love</title>
  
  <subtitle>专注技巧</subtitle>
  <link href="https://myxym-love.github.io/atom.xml" rel="self"/>
  
  <link href="https://myxym-love.github.io/"/>
  <updated>2022-05-06T07:01:57.847Z</updated>
  <id>https://myxym-love.github.io/</id>
  
  <author>
    <name>Mao Yu</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>将hexo静态博客资源部署到阿里云服务器</title>
    <link href="https://myxym-love.github.io/2022/050642307.html"/>
    <id>https://myxym-love.github.io/2022/050642307.html</id>
    <published>2022-05-06T05:59:39.000Z</published>
    <updated>2022-05-06T07:01:57.847Z</updated>
    
    <content type="html"><![CDATA[<div align='center'><font size='70'>将hexo静态博客资源部署到阿里云服务器</font></div><h2 id="1-WHY？"><a href="#1-WHY？" class="headerlink" title="1.WHY？"></a>1.WHY？</h2><p>大多数人使用<code>hexo</code>搭建个人博客，基本 都是部署在<code>Github Page</code>或者<code>Gitee Page</code>上的,相较于<code>Github Page</code>,部署在<code>Gitee Page</code>上的人应该会更多点。因为<code>Github Page</code>毕竟是国外的<code>Github</code>网站提供给每一个加入<code>GitHub</code>的一个静态服务器,国内用户访问起来的体验感实在是太差了。而<code>Gitee Page</code>是国内<code>Gitee</code>提供的，国内用户访问起来想对于来说体验感好一点。但还有没有其他方式部署我们的个人博客呢？当然有！只要你有一台属于自己的云服务器，那么也可以将个人博客部署在云服务器上。云服务器的购买途径有很多，在这里，我推荐使用阿里云服务器或者腾讯云服务器。</p><h2 id="2-HOW？"><a href="#2-HOW？" class="headerlink" title="2.HOW？"></a>2.HOW？</h2><h3 id="1-本地的准备"><a href="#1-本地的准备" class="headerlink" title="1.本地的准备"></a>1.本地的准备</h3><p>为了能够是使本地的项目与远程的<code>git</code>联系起来， 需要在本地电脑上生成密钥，使用如下命令在<code>cmd</code>终端中输入</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ssh-keygen<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>一路按回车就行，生成的公钥和私钥默认的路径是你用户下.<code>ssh</code>文件夹下,例如我的路径<code>C:\Users\ASUS\.ssh</code>，<code>id_rsa</code>是私钥,<code>id_rsa.pub</code>是公钥，我们需要用到公钥里的内容，下面的内容会提到。</p><h3 id="2-云服务器的准备"><a href="#2-云服务器的准备" class="headerlink" title="2.云服务器的准备"></a>2.云服务器的准备</h3><p>在云服务器上我们需要安装<code>git</code>:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum <span class="token function">install</span> <span class="token function">git</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>安装好后，我们新建一个git用户：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">adduser <span class="token function">git</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>添加<code>git</code>用户权限：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">chmod</span> <span class="token number">740</span> /etc/sudoers<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后用<code>vim</code>编辑器打开文件编辑</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span> /etc/sudoers<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>找到如下位置，并添加</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">root   <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL<span class="token punctuation">)</span>     ALL <span class="token comment">#文件内的位置</span><span class="token function">git</span>    <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL<span class="token punctuation">)</span>     ALL <span class="token comment">#添加的内容</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>把权限更改回去</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">chmod</span> <span class="token number">400</span> /etc/sudoers<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>设置 <code>git</code> 账户密码：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">passwd</span> <span class="token function">git</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><code>Linux</code>输入密码是不会显示，输入好了按回车就行。</p></blockquote><p>切换至<code>git</code>用户，创建 <code>~/.ssh</code> 文件夹和 <code>~/.ssh/authorized_keys</code> 文件，并赋予相应的权限</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">su</span> <span class="token function">git</span><span class="token function">mkdir</span>  ~/.ssh<span class="token function">vim</span>  ~/.ssh/authorized_keys<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>将我们在<code>win10</code>中生成的<code>id_rsa.pub</code>文件中的公钥复制到<code>authorized_keys</code>中。</p><p>接着，输入一下命令，赋予权限：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">chmod</span> <span class="token number">600</span> /home/git/.ssh/authorized_keys<span class="token function">chmod</span> <span class="token number">700</span> /home/git/.ssh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>打开我们本地<code>cmd</code>，输入：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ssh</span> git@master<span class="token comment">#master是你云服务器的ip</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>小插曲：我这里的<code>master</code>是我在我本机配置了<code>ip</code>映射关系,master指向的是的云服务器公网<code>ip</code>，由于<code>ip</code>地址不好记，我就做了这个映射关系，只需要再<code>C:\Windows\System32\drivers\etc</code>文件夹下的<code>hosts</code>文件内添加一条记录即可。</p></blockquote><p>以上配置完成后,我们使用<code>ssh git@master</code>登录云服务器的<code>git</code>用户就不需要输入密码了。不然每次修改博客内容,再推送到云服务器上都要输入密码。</p><h3 id="3-配置Git-Hooks"><a href="#3-配置Git-Hooks" class="headerlink" title="3.配置Git Hooks"></a>3.配置Git Hooks</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">su</span> <span class="token comment">#返回服务端命令行切换到 root 账户</span><span class="token function">mkdir</span> /var/repo <span class="token comment">#mkdir /var/repo</span><span class="token function">chown</span> -R git:git /var/repo<span class="token function">chmod</span> -R <span class="token number">755</span> /var/repo <span class="token comment">#赋予权限</span><span class="token function">mkdir</span> /var/hexo<span class="token function">chown</span> -R git:git /var/hexo<span class="token function">chmod</span> -R <span class="token number">755</span> /var/hexo <span class="token comment">#接下来创建 hexo 目录作为网站根目录，并赋予权限</span><span class="token builtin class-name">cd</span> /var/repo<span class="token function">git</span> init --bare hexo.git 接下来创建一个空白的 <span class="token function">git</span> 仓库<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在 <code>/var/repo/hexo.git</code> 下，有一个自动生成的 hooks 文件夹。我们需要在里边新建一个新的钩子文件 <code>post-receive</code></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span> /var/repo/hexo.git/hooks/post-receive<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在该文件里面输入以下内容然后保存退出：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span><span class="token function">git</span> --work-tree<span class="token operator">=</span>/var/hexo --git-dir<span class="token operator">=</span>/var/repo/hexo.git checkout -f<span class="token function">chown</span> -R git:git /var/repo/hexo.git/hooks/post-receive<span class="token function">chmod</span> +x /var/repo/hexo.git/hooks/post-receive <span class="token comment">#修改权限</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>到这里 <code>git</code>仓库和钩子 已经搭建完毕了。</p><h2 id="3-nginx安装与配置修改"><a href="#3-nginx安装与配置修改" class="headerlink" title="3.nginx安装与配置修改"></a>3.nginx安装与配置修改</h2><p>我们首先需要安装<code>nginx</code>服务器（默认路径<code>/etc/nginx/</code>）</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum <span class="token function">install</span> -y nginx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后我们再去编辑<code>/etc/nginx/</code>下的<code>nginx.conf</code>文件</p><p><img src="/images/pasted_8.png"></p><h2 id="4-推送hexo静态资源"><a href="#4-推送hexo静态资源" class="headerlink" title="4.推送hexo静态资源"></a>4.推送hexo静态资源</h2><p>在本地<code>hexo</code>根目录下的<code>_config.yml</code>文件内修改推送仓库地址：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">deploy</span><span class="token punctuation">:</span>  <span class="token key atrule">type</span><span class="token punctuation">:</span> git <span class="token comment">#推送方式</span>  <span class="token comment">#repo: git@github.com:myxym-love/myxym-love.github.io.git</span>  <span class="token comment">#repo: git@gitee.com:myxym-love/myxym-love.git</span>  <span class="token key atrule">repo</span><span class="token punctuation">:</span> git@47.100.227.19<span class="token punctuation">:</span>/var/repo/hexo.git <span class="token comment">#云服务器上的git仓库地址</span>  <span class="token key atrule">branch</span><span class="token punctuation">:</span> master <span class="token comment">#推送到哪一个分支</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>推送：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo clean <span class="token operator">&amp;&amp;</span> hexo g <span class="token operator">&amp;&amp;</span> hexo d<span class="token comment">#hexo clean清除静态资源文件,每次都执行一下，以免有缓存</span><span class="token comment">#hexo g生成静态资源文件</span><span class="token comment">#hexo d推送到远程仓库</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-启动nginx"><a href="#5-启动nginx" class="headerlink" title="5.启动nginx"></a>5.启动nginx</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl start nginx <span class="token comment">#启动nginx</span>systemctl <span class="token builtin class-name">enable</span> nginx <span class="token comment">#开启启动ngnix</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>启动成功后，访问你的域名或者<code>ip</code>地址就能看到内容啦。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;div align=&#39;center&#39;&gt;&lt;font size=&#39;70&#39;&gt;将hexo静态博客资源部署到阿里云服务器&lt;/font&gt;&lt;/div&gt;

&lt;h2 id=&quot;1-WHY？&quot;&gt;&lt;a href=&quot;#1-WHY？&quot; class=&quot;headerlink&quot; title=&quot;1.WHY？&quot;&gt;&lt;</summary>
      
    
    
    
    <category term="技巧经验" scheme="https://myxym-love.github.io/categories/%E6%8A%80%E5%B7%A7%E7%BB%8F%E9%AA%8C/"/>
    
    
    <category term="hexo" scheme="https://myxym-love.github.io/tags/hexo/"/>
    
    <category term="云服务器" scheme="https://myxym-love.github.io/tags/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>hexo matery主题评论推送</title>
    <link href="https://myxym-love.github.io/2022/050461765.html"/>
    <id>https://myxym-love.github.io/2022/050461765.html</id>
    <published>2022-05-04T07:31:42.000Z</published>
    <updated>2022-05-06T06:02:04.369Z</updated>
    
    <content type="html"><![CDATA[<div align='center'><font size='70'>Hexo Matery主题评论推送功能</font></div><h2 id="1-前言"><a href="#1-前言" class="headerlink" title="1.前言"></a>1.前言</h2><p>这一节内容讲的是如何在<code>matery</code>主题下实现评论推送功能，当别人评论我们的文章的是时候，我们可以第一时间看到内容。我所用的评论系统是<code>LeanCloud</code>d的支持<code>Vlain</code>评论。</p><h2 id="2-环境准备"><a href="#2-环境准备" class="headerlink" title="2.环境准备"></a>2.环境准备</h2><p>有哪些推送平台呢？</p><ul><li><code>coolPush</code>QQ机器人</li><li><code>Valine-Admin</code>邮件提醒</li><li><code>Server酱</code>(可以支持很多消息通道，推荐使用)</li></ul><p>我选用的是<a href="https://sct.ftqq.com/">Server酱</a>,英文名<code>ServerChan</code>，是一款手机和服务器、智能设备之间的通信软件。</p><p>微信扫码登录官网，会自动给你生成<code>SendKey</code>，如下图所示</p><p><img src="/images/pasted_3.png"></p><p>接下来,我们可以使用在线发送工具，来测试一下</p><p><img src="/images/pasted_4.png"></p><p>API调用实例</p><p>最简单的调用方式，直接在浏览器中输入以下 URL：</p><pre class="line-numbers language-apl" data-language="apl"><code class="language-apl">https<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span><span class="token monadic-operator operator">/</span>sctapi<span class="token dyadic-operator operator">.</span>ftqq<span class="token dyadic-operator operator">.</span>com<span class="token monadic-operator operator">/</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token dyadic-operator operator">.</span>send<span class="token function">?</span>title<span class="token function">=</span>messagetitle<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这时候你选择的消息通道会给你发送一个标题为<code>messagetitle</code>的内容</p><p>如果你要发送中文，记得要把参数编码，比如通过 urlencode 函数。这样发送只有标题，如果需要内容，可以这样：</p><pre class="line-numbers language-apl" data-language="apl"><code class="language-apl">https<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span><span class="token monadic-operator operator">/</span>sctapi<span class="token dyadic-operator operator">.</span>ftqq<span class="token dyadic-operator operator">.</span>com<span class="token monadic-operator operator">/</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token dyadic-operator operator">.</span>send<span class="token function">?</span>title<span class="token function">=</span>messagetitle<span class="token monadic-operator operator">&amp;</span>desp<span class="token function">=</span>messagecontent<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>但是需要注意，GET 请求是有长度限制的，所以还是建议大家使用 POST 请求来发送。</p><h2 id="3-Server酱API详解"><a href="#3-Server酱API详解" class="headerlink" title="3.Server酱API详解"></a>3.Server酱API详解</h2><p>向以下 URL 发送一个 HTTP 请求，并传递参数即可。</p><pre class="line-numbers language-apl" data-language="apl"><code class="language-apl">https<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span><span class="token monadic-operator operator">/</span>sctapi<span class="token dyadic-operator operator">.</span>ftqq<span class="token dyadic-operator operator">.</span>com<span class="token monadic-operator operator">/</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token function">*</span><span class="token dyadic-operator operator">.</span>send<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>参数说明如下：</p><ul><li><p>title: 消息标题，必填。最大长度为 32 。</p></li><li><p>desp: 消息内容，选填。支持 <a href="https://rexxars.github.io/react-markdown/">Markdown语法</a> ，最大长度为 32KB ,消息卡片截取前 30 显示。</p></li><li><p>channel: 动态指定本次推送使用的消息通道，选填。如不指定，则使用网站上的消息通道页面设置的通道。支持最多两个通道，多个通道值用竖线|隔开。比如，同时发送服务号和企业微信应用消息通道，则使用 9|66 。通道对应的值如下：</p><ul><li>方糖服务号=9</li><li>Android=98</li><li>Bark iOS=8</li><li>企业微信群机器人=1</li><li>钉钉群机器人=2</li><li>飞书群机器人=3</li><li>测试号=0</li><li>自定义=88</li><li>PushDeer=18</li><li>企业微信应用消息=66</li></ul></li><li><p>openid: 消息抄送的openid，选填。只支持测试号和企业微信应用消息通道。测试号的 openid 从测试号页面获得 ，多个 openid 用 , 隔开。企业微信应用消息通道的openid 参数，内容为接收人在企业微信中的 UID（可在消息通道页面配置好该通道后通过链接查看） , 多个人请 | 隔开，即可发给特定人/多个人。不填则发送给通道配置页面的接收人。</p></li></ul><h2 id="4-修改metary主题对应文件代码"><a href="#4-修改metary主题对应文件代码" class="headerlink" title="4.修改metary主题对应文件代码"></a>4.修改metary主题对应文件代码</h2><p>找到主题文件夹下<code>themes\hexo-theme-matery\layout\_partial</code>的<code>Valine.ejs</code>文件，照理说最后一个<code>script</code>标签会起作用的，但是我的没有起效果,我就把最后一个<code>script</code>的内容复制到了上一个<code>script</code>里面去，然后把最后一个<code>script</code>标签删除。要修改的代码是</p><pre class="line-numbers language-ej" data-language="ej"><code class="language-ej">var pushLink &#x3D;&quot;https:&#x2F;&#x2F;sctapi.ftqq.com&#x2F;*****************.send&quot;;    var siteName &#x3D; &quot;&lt;%- config.title %&gt;&#39;s Blog&quot;;    var valineButton&#x3D;document.getElementsByClassName(&quot;vsubmit vbtn&quot;)[0];    var title &#x3D; siteName + &quot;上又有新评论啦~!\n&quot;;      function send_valine() &#123;      &#x2F;&#x2F;获取元素信息      var pagename &#x3D; document.title;      var pageurl &#x3D; document.URL;      var pushtime &#x3D; new Date();      var vnick &#x3D; document.getElementsByClassName(&quot;vnick vinput&quot;)[0].value;      var vmail &#x3D; document.getElementsByClassName(&quot;vmail vinput&quot;)[0].value;      var vlink &#x3D; document.getElementsByClassName(&quot;vlink vinput&quot;)[0].value;      var veditor &#x3D; document.getElementsByClassName(&quot;veditor vinput&quot;)[0].value;      content &#x3D;        title +        &quot;\n\n昵称：&quot; + vnick +        &quot;\n\n邮箱：&quot; + vmail +        &quot;\n\n网站地址：&quot; + vlink +        &quot;\n\n文章标题：&quot; + pagename +        &quot;\n\n评论内容：\n\n&quot; + veditor +        &quot;\n\n文章链接：&quot; + pageurl +        &quot;\n\n评论时间：&quot; + pushtime.toLocaleString() + &quot;\n&quot;;      var httpRequest &#x3D; new XMLHttpRequest(); &#x2F;&#x2F;第一步：创建需要的对象      httpRequest.open(&quot;POST&quot;, pushLink, true); &#x2F;&#x2F;第二步：打开连接      httpRequest.setRequestHeader(        &quot;Content-type&quot;,        &quot;application&#x2F;x-www-form-urlencoded&quot;      ); &#x2F;&#x2F;设置请求头 注：post方式必须设置请求头（在建立连接后设置请求头）      httpRequest.send(&quot;title&#x3D;&quot; + pagename + &quot;&amp;desp&#x3D;&quot; + content); &#x2F;&#x2F;发送请求     &#125;      document.body.addEventListener(&#39;click&#39;, function(e) &#123;    if(e.target.className.indexOf(&#39;vsubmit&#39;) &#x3D;&#x3D;&#x3D; -1) &#123;      return;    &#125;    send_valine();  &#125;)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-选择消息通道"><a href="#5-选择消息通道" class="headerlink" title="5.选择消息通道"></a>5.选择消息通道</h2><p>我选择的消息通道是<a href="http://www.pushdeer.com/">PushDeer</a>，进入到官网，下载你对应手机系统的<code>APP</code>，使用微信登录，会自动给你生成<code>PushDeer pushkey</code>,然后在<code>Server酱</code>官网上选择<code>PushDeer</code>消息通道，并输入<code>PushDeer pushkey</code>，然后保存即可。</p><h2 id="6-效果测试"><a href="#6-效果测试" class="headerlink" title="6.效果测试"></a>6.效果测试</h2><p>评论是支持<code>Markdown</code>语法的，发送的内容最终也会被解析成<code>Markdown</code>语法</p><blockquote><p>两个换行符才能实现换行！！！！！！！！</p></blockquote><p><img src="/images/pasted_5.jpg"></p><p><img src="/images/pasted_6.jpg"></p><p><img src="/images/pasted_7.jpg"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;div align=&#39;center&#39;&gt;&lt;font size=&#39;70&#39;&gt;Hexo Matery主题评论推送功能&lt;/font&gt;&lt;/div&gt;

&lt;h2 id=&quot;1-前言&quot;&gt;&lt;a href=&quot;#1-前言&quot; class=&quot;headerlink&quot; title=&quot;1.前言&quot;&gt;&lt;/a&gt;1.前言</summary>
      
    
    
    
    <category term="技巧经验" scheme="https://myxym-love.github.io/categories/%E6%8A%80%E5%B7%A7%E7%BB%8F%E9%AA%8C/"/>
    
    
    <category term="hexo" scheme="https://myxym-love.github.io/tags/hexo/"/>
    
    <category term="matery" scheme="https://myxym-love.github.io/tags/matery/"/>
    
  </entry>
  
  <entry>
    <title>springboot聚合数据</title>
    <link href="https://myxym-love.github.io/2022/050323444.html"/>
    <id>https://myxym-love.github.io/2022/050323444.html</id>
    <published>2022-05-03T06:08:48.000Z</published>
    <updated>2022-05-05T07:43:51.387Z</updated>
    
    <content type="html"><![CDATA[<div align='center'><font size='70'>springboot聚合接口数据</font></div><p>1.<strong>背景</strong></p><p>最近在写<code>Android</code> 大作业,做一个教育类的<code>APP</code>,后端是用的<code>springboot</code>来开发的，由<code>springboot</code>返回<code>json</code>数据接口,<code>Android</code>使用<code>OKHttpUtils</code>来请求后端的数据接口,在开发首页的时候,一共有四组不同的数据,也就意味着我要请求四个不同的接口来获取数据。这显然是有点多余,并且有很多重复的代码，这时候我就在想,后端能不能把这四组数据一起返回给我呢?果不其然,找到了<code>spring-boot-data-aggregator-starter</code>可以实现我的需求。</p><p>2.<strong>实现</strong></p><p><code>spring-boot-data-aggregator-starter</code>已经发布到了<code>maven</code>中央仓库,所以只需要在<code>pom.xml</code>文件引入该依赖即可。</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>io.github.lvyahui8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-data-aggregator-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.1.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在<code> application.properties</code>文件中声明注解的扫描路径</p><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">io.github.lvyahui8.spring.base-packages</span><span class="token punctuation">=</span><span class="token attr-value">com.example.shoppingmall_end</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>上述的包名只需要换成你项目的包名即可</p><p>我所用到的三个类分别是</p><ul><li><code>Video</code></li><li><code>VideoBanner</code></li><li><code>Channel</code></li></ul><p>然后定了一<code>ResultBeana</code>类,属性分别是上面三个类的List集合</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResultBean</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Video</span><span class="token punctuation">></span></span> video<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">VideoBanner</span><span class="token punctuation">></span></span> videoBanner<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Channel</span><span class="token punctuation">></span></span> <span class="token function">getListChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> listChannel<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setListChannel</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Channel</span><span class="token punctuation">></span></span> listChannel<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>listChannel <span class="token operator">=</span> listChannel<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Channel</span><span class="token punctuation">></span></span> channelList<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">VideoBanner</span><span class="token punctuation">></span></span> actList<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Channel</span><span class="token punctuation">></span></span> listChannel<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Video</span><span class="token punctuation">></span></span> <span class="token function">getVideo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> video<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVideo</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Video</span><span class="token punctuation">></span></span> video<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>video <span class="token operator">=</span> video<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">VideoBanner</span><span class="token punctuation">></span></span> <span class="token function">getVideoBanner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> videoBanner<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVideoBanner</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">VideoBanner</span><span class="token punctuation">></span></span> videoBanner<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>videoBanner <span class="token operator">=</span> videoBanner<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Channel</span><span class="token punctuation">></span></span> <span class="token function">getChannelList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> channelList<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setChannelList</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Channel</span><span class="token punctuation">></span></span> channelList<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>channelList <span class="token operator">=</span> channelList<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">VideoBanner</span><span class="token punctuation">></span></span> <span class="token function">getActList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> actList<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setActList</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">VideoBanner</span><span class="token punctuation">></span></span> actList<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>actList <span class="token operator">=</span> actList<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>接着我们需要在<code>ServiceImpl</code>需要聚合的方法上加上注解<code>@DataProvider(id = &quot;name&quot;)</code>,比如:</p><p>在<code>VideoServiceImpl</code> 里的方法中</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@DataProvider</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token string">"videoList"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Video</span><span class="token punctuation">></span></span> <span class="token function">listVideo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Object</span> cacheVideoList <span class="token operator">=</span> baseCache<span class="token punctuation">.</span><span class="token function">getTenMinutesCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">CacheKeyManager</span><span class="token punctuation">.</span>INDEX_VIDEO_LIST<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>                <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Video</span><span class="token punctuation">></span></span> videoList <span class="token operator">=</span> videoMapper<span class="token punctuation">.</span><span class="token function">listVideo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"从数据库拿视频列表数据"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> videoList<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>cacheVideoList <span class="token keyword">instanceof</span> <span class="token class-name">List</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Video</span><span class="token punctuation">></span></span> videoList <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Video</span><span class="token punctuation">></span></span><span class="token punctuation">)</span> cacheVideoList<span class="token punctuation">;</span>                <span class="token keyword">return</span> videoList<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token annotation punctuation">@DataProvider</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token string">"banner"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">VideoBanner</span><span class="token punctuation">></span></span> <span class="token function">listBanner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Object</span> cacheBanner <span class="token operator">=</span> baseCache<span class="token punctuation">.</span><span class="token function">getTenMinutesCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">CacheKeyManager</span><span class="token punctuation">.</span>INDEX_BANNER_KEY<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>                <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">VideoBanner</span><span class="token punctuation">></span></span> bannerList <span class="token operator">=</span> videoMapper<span class="token punctuation">.</span><span class="token function">listBanner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"从数据库里拿轮播图数据"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> bannerList<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>cacheBanner <span class="token keyword">instanceof</span> <span class="token class-name">List</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">VideoBanner</span><span class="token punctuation">></span></span> bannerList <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">VideoBanner</span><span class="token punctuation">></span></span><span class="token punctuation">)</span> cacheBanner<span class="token punctuation">;</span>                <span class="token keyword">return</span> bannerList<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token annotation punctuation">@DataProvider</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token string">"actList"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">VideoBanner</span><span class="token punctuation">></span></span> <span class="token function">getActList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> videoMapper<span class="token punctuation">.</span><span class="token function">getActList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>以及在<code>ChannelServiceImpl</code>的中方法中</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@DataProvider</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token string">"channelList"</span><span class="token punctuation">)</span>   <span class="token annotation punctuation">@Override</span>   <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Channel</span><span class="token punctuation">></span></span> <span class="token function">getChannelList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">return</span> channelMapper<span class="token punctuation">.</span><span class="token function">getChannelList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token annotation punctuation">@DataProvider</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token string">"listChannel"</span><span class="token punctuation">)</span>   <span class="token annotation punctuation">@Override</span>   <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Channel</span><span class="token punctuation">></span></span> <span class="token function">listChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">return</span> channelMapper<span class="token punctuation">.</span><span class="token function">listChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>@DataProvider(id = &quot;name&quot;)表示是数据提供者</code></p><p>接着我们需要定义一个<code>HomeAggregate</code>类,类名随便取</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HomeAggregate</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@DataProvider</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token string">"HomeData"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">ResultBean</span> <span class="token function">homeData</span><span class="token punctuation">(</span><span class="token annotation punctuation">@DataConsumer</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token string">"banner"</span><span class="token punctuation">)</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">VideoBanner</span><span class="token punctuation">></span></span> videoBanner<span class="token punctuation">,</span>                               <span class="token annotation punctuation">@DataConsumer</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token string">"videoList"</span><span class="token punctuation">)</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Video</span><span class="token punctuation">></span></span> videoList<span class="token punctuation">,</span>                               <span class="token annotation punctuation">@DataConsumer</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token string">"channelList"</span><span class="token punctuation">)</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Channel</span><span class="token punctuation">></span></span> channelList<span class="token punctuation">,</span>                               <span class="token annotation punctuation">@DataConsumer</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token string">"actList"</span><span class="token punctuation">)</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">VideoBanner</span><span class="token punctuation">></span></span> actList<span class="token punctuation">,</span>                               <span class="token annotation punctuation">@DataConsumer</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token string">"listChannel"</span><span class="token punctuation">)</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Channel</span><span class="token punctuation">></span></span> listChannel<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ResultBean</span> resultBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ResultBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        resultBean<span class="token punctuation">.</span><span class="token function">setChannelList</span><span class="token punctuation">(</span>channelList<span class="token punctuation">)</span><span class="token punctuation">;</span>        resultBean<span class="token punctuation">.</span><span class="token function">setActList</span><span class="token punctuation">(</span>actList<span class="token punctuation">)</span><span class="token punctuation">;</span>        resultBean<span class="token punctuation">.</span><span class="token function">setVideoBanner</span><span class="token punctuation">(</span>videoBanner<span class="token punctuation">)</span><span class="token punctuation">;</span>        resultBean<span class="token punctuation">.</span><span class="token function">setVideo</span><span class="token punctuation">(</span>videoList<span class="token punctuation">)</span><span class="token punctuation">;</span>        resultBean<span class="token punctuation">.</span><span class="token function">setListChannel</span><span class="token punctuation">(</span>listChannel<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> resultBean<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>最后,我们定义一个<code>HomeController</code>类，</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"api/v1/pub/home"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HomeController</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DataBeanAggregateQueryFacade</span> dataBeanAggregateQueryFacade<span class="token punctuation">;</span>    <span class="token comment">/**     * 获取首页数据     * @return 首页数据     * @throws InterruptedException 异常     * @throws InvocationTargetException 异常     * @throws IllegalAccessException 异常     */</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/getData"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">ResultBean</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">,</span> <span class="token class-name">InvocationTargetException</span><span class="token punctuation">,</span> <span class="token class-name">IllegalAccessException</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> dataBeanAggregateQueryFacade<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"HomeData"</span><span class="token punctuation">,</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonMap</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token class-name">ResultBean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>因为这些数据是直接请求的,不需要传参,所以在<code>Collections.singletonMap(&quot;&quot;,&quot;&quot;)</code>里没有传参,如果有参数话的填写对应参数,比如：需要video_id 才能请求到这些数据话,那么只需要改成<code>Collections.singletonMap(&quot;video_id&quot;,videoId)即可</code></p></blockquote><p>这时候我们启动项目</p><p><img src="/images/pasted_2.png"></p><p>发现如上图所示代表数据聚合成功</p><blockquote><p>如果在其他方法上也添加了<code>@DataProvider(id = &quot;name&quot;)</code>的话，而你没有在使用它,那么启动项目的时候会报错，所以不需要数据聚合的方法上不需要添加该注解</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;div align=&#39;center&#39;&gt;&lt;font size=&#39;70&#39;&gt;springboot聚合接口数据&lt;/font&gt;&lt;/div&gt;

&lt;p&gt;1.&lt;strong&gt;背景&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;最近在写&lt;code&gt;Android&lt;/code&gt; 大作业,做一个教育类的&lt;code</summary>
      
    
    
    
    <category term="springboot" scheme="https://myxym-love.github.io/categories/springboot/"/>
    
    
    <category term="springboot" scheme="https://myxym-love.github.io/tags/springboot/"/>
    
  </entry>
  
  <entry>
    <title>高数错题日记整理01</title>
    <link href="https://myxym-love.github.io/2022/041730615.html"/>
    <id>https://myxym-love.github.io/2022/041730615.html</id>
    <published>2022-04-17T08:19:00.000Z</published>
    <updated>2022-05-02T11:25:31.184Z</updated>
    
    <content type="html"><![CDATA[<p>$$<br>\lim_{n\rightarrow\infty}{\frac{(\sqrt1+\sqrt2+\dot\ \dot\ \dot\ +\sqrt{n})(1+\frac{1}{\sqrt{2}}+ \dot\ \dot\ \dot\ \frac{1}{\sqrt{n}})}{(n+1)(n+2)}}<br>$$</p><p>$$<br>x^{y^z}=(1+{\rm e}^x)^{-2xy^w}<br>$$</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;$$&lt;br&gt;\lim_{n\rightarrow\infty}{\frac{(\sqrt1+\sqrt2+\dot\ \dot\ \dot\ +\sqrt{n})(1+\frac{1}{\sqrt{2}}+ \dot\ \dot\ \dot\ \frac{1}{\sqrt{</summary>
      
    
    
    
    <category term="高数错题" scheme="https://myxym-love.github.io/categories/%E9%AB%98%E6%95%B0%E9%94%99%E9%A2%98/"/>
    
    
    <category term="高数" scheme="https://myxym-love.github.io/tags/%E9%AB%98%E6%95%B0/"/>
    
    <category term="错题" scheme="https://myxym-love.github.io/tags/%E9%94%99%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>Redis学习笔记</title>
    <link href="https://myxym-love.github.io/2022/041630038.html"/>
    <id>https://myxym-love.github.io/2022/041630038.html</id>
    <published>2022-04-16T10:11:00.000Z</published>
    <updated>2022-05-02T11:25:31.177Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Linux下安装Redis6-X"><a href="#Linux下安装Redis6-X" class="headerlink" title="Linux下安装Redis6.X"></a>Linux下安装Redis6.X</h2><p>注意：安装Redis6.X版本需要gcc9.X以上版本</p><p>1.安装gcc安装包的镜像源</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum <span class="token function">install</span> centos-release-scl<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>2.安装gcc9和g++9</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum <span class="token function">install</span> devtoolset-9<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>3.上传redis6.x到Centos7服务器上，使用RailDrive连接服务器进行上传</p><p>cd /usr/local目录下新建一个software文件夹,之后把所有得软件上传到software文件夹下，方便管理</p><p>4.解压redis</p><p>tar -zxvf redis-6.2.5.tar.gz</p><p>5.进入redis-6.2.5目录下，执行以下命令</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">make</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>6.redis的默认安装路径 /usr/local/bin</p><p>7.在/usr/local/bin目录下新建一个mconfig目录,把redis配置文件redis.conf拷贝一份到此目录下，以后就使用mconfig下的配置文件启动</p><p>8.redis默认不是后台启动的</p><p>9.vim redis.conf进行编辑，修改配置 </p><p>damonize no no改为yes</p><p>10.启动redis服务，通过指定的配置文件启动，在/usr/local/bin目录下执行</p><pre class="line-numbers language-none"><code class="language-none">redis-server mconfig&#x2F;redis.conf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">reids-cli -p 6379<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>11.关闭redis服务shutdown</p><h2 id="Redis基础知识"><a href="#Redis基础知识" class="headerlink" title="Redis基础知识"></a>Redis基础知识</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token keyword">select</span> <span class="token number">1</span> <span class="token comment">#切换数据库</span>OK<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">></span> DBSIZE <span class="token comment">#查看数据库的大小</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">></span> <span class="token builtin class-name">set</span> name myxymOK<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">></span> DBSIZE<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">></span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token keyword">select</span> <span class="token number">1</span>OK<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">></span> DBSIZE<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">></span> <span class="token builtin class-name">set</span> name myxymOK<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">></span> DBSIZE<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">></span> FLUSHDB  <span class="token comment">#清除当前数据库</span>OK<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">></span> DBSIZE<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">></span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>FLUSHALL 清楚所有数据库数据</p><h2 id="五大数据类型"><a href="#五大数据类型" class="headerlink" title="五大数据类型"></a>五大数据类型</h2><h3 id="1-Redis-key"><a href="#1-Redis-key" class="headerlink" title="1.Redis-key"></a>1.Redis-key</h3><p>​    </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> name myxymOK<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> get name<span class="token string">"myxym"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> EXPIRE name <span class="token number">60</span> <span class="token comment">#设置过期时间</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> ttl name  <span class="token comment">#查看过期倒计时</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">58</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> ttl name<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">57</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> ttl name<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">54</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> ttl anem<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> -2<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> ttl name<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">35</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> get name<span class="token string">"myxym"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> move name <span class="token number">1</span> <span class="token comment">#从当前数据库移除key</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> get name<span class="token string">"myxym"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> keys *<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"name"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> tt lname<span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR unknown <span class="token builtin class-name">command</span> <span class="token variable"><span class="token variable">`</span>tt<span class="token variable">`</span></span>, with args beginning with: <span class="token variable"><span class="token variable">`</span>lname<span class="token variable">`</span></span>, <span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> ttl name<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> ttl name<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> -2<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> get name<span class="token punctuation">(</span>nil<span class="token punctuation">)</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> name myxymOK<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> ttl name<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> -1<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> ttl name<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> -1<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> get name<span class="token string">"myxym"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> move name <span class="token number">1</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">type</span> name <span class="token comment">#查看当前key的类型</span>string<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-String"><a href="#2-String" class="headerlink" title="2.String"></a>2.String</h3>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Linux下安装Redis6-X&quot;&gt;&lt;a href=&quot;#Linux下安装Redis6-X&quot; class=&quot;headerlink&quot; title=&quot;Linux下安装Redis6.X&quot;&gt;&lt;/a&gt;Linux下安装Redis6.X&lt;/h2&gt;&lt;p&gt;注意：安装Redis6.X版</summary>
      
    
    
    
    <category term="技巧经验" scheme="https://myxym-love.github.io/categories/%E6%8A%80%E5%B7%A7%E7%BB%8F%E9%AA%8C/"/>
    
    
    <category term="redis" scheme="https://myxym-love.github.io/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>Git使用教程</title>
    <link href="https://myxym-love.github.io/2022/01028579.html"/>
    <id>https://myxym-love.github.io/2022/01028579.html</id>
    <published>2022-01-02T03:55:45.439Z</published>
    <updated>2022-05-02T11:25:31.173Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Git使用教程"><a href="#Git使用教程" class="headerlink" title="Git使用教程"></a>Git使用教程</h1><h2 id="1-如何把本地的项目上传到GitHub上"><a href="#1-如何把本地的项目上传到GitHub上" class="headerlink" title="1.如何把本地的项目上传到GitHub上"></a>1.如何把本地的项目上传到GitHub上</h2><p>1.打开Git Bash进入到要上传的项目的目录下</p><p>2.配置用户名和邮箱</p><pre class="line-numbers language-bas" data-language="bas"><code class="language-bas">git config --global user.name &quot;Your username&quot;git config --global user.email &quot;Your email&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>3.在GitHub上设置本地的ssh公钥</p><p>（1）在本地生成ssh公钥私钥</p><pre class="line-numbers language-bas" data-language="bas"><code class="language-bas">ssh-keygen<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>生成的.ssh文件默认在C:\Users\ASUS\.ssh (ASUS是我电脑的名字)</p><p>在.ssh文件下有id_rsa.pub文件,把里面的内容添加到你的GigHub的设置里</p><p>4.在你的GitHub上新建一个仓库,复制仓库的ssh地址</p><p>5.把你创建好的仓库克隆到你的项目文件夹下</p><pre class="line-numbers language-bas" data-language="bas"><code class="language-bas">git clone git@github.com:myxym-love&#x2F;javaweb.git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p> (<a href="mailto:&#103;&#x69;&#x74;&#64;&#x67;&#x69;&#x74;&#x68;&#117;&#x62;&#x2e;&#99;&#x6f;&#109;">&#103;&#x69;&#x74;&#64;&#x67;&#x69;&#x74;&#x68;&#117;&#x62;&#x2e;&#99;&#x6f;&#109;</a>:myxym-love/javaweb.git)换成你自己仓库地址</p><p>6.把你项目的下的所有文件以及文件夹(除了你拉取的仓库文件夹)复制到你拉取的仓库文件夹里</p><p>7.进去到你拉取的仓库文件夹里</p><pre class="line-numbers language-bas" data-language="bas"><code class="language-bas">git add . (.表示所有文件)git commit -m &quot;描述&quot;git push -u origin master (第一次psuh要加-u)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Git使用教程&quot;&gt;&lt;a href=&quot;#Git使用教程&quot; class=&quot;headerlink&quot; title=&quot;Git使用教程&quot;&gt;&lt;/a&gt;Git使用教程&lt;/h1&gt;&lt;h2 id=&quot;1-如何把本地的项目上传到GitHub上&quot;&gt;&lt;a href=&quot;#1-如何把本地的项目上传到</summary>
      
    
    
    
    <category term="技巧经验" scheme="https://myxym-love.github.io/categories/%E6%8A%80%E5%B7%A7%E7%BB%8F%E9%AA%8C/"/>
    
    
    <category term="Git" scheme="https://myxym-love.github.io/tags/Git/"/>
    
    <category term="攻略" scheme="https://myxym-love.github.io/tags/%E6%94%BB%E7%95%A5/"/>
    
  </entry>
  
  <entry>
    <title>云服务器之间实现免密登录</title>
    <link href="https://myxym-love.github.io/2022/010230399.html"/>
    <id>https://myxym-love.github.io/2022/010230399.html</id>
    <published>2022-01-02T03:55:00.000Z</published>
    <updated>2022-05-06T06:20:44.232Z</updated>
    
    <content type="html"><![CDATA[<h1 id="云服务器之间实现免密登录"><a href="#云服务器之间实现免密登录" class="headerlink" title="云服务器之间实现免密登录"></a>云服务器之间实现免密登录</h1><h4 id="1-安装ssh"><a href="#1-安装ssh" class="headerlink" title="1. 安装ssh"></a>1. 安装ssh</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum <span class="token function">install</span> -y <span class="token function">ssh</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>注：每台服务器都要安装ssh</p><h4 id="2-在每台服务器上生成公钥"><a href="#2-在每台服务器上生成公钥" class="headerlink" title="2.在每台服务器上生成公钥"></a>2.在每台服务器上生成公钥</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ssh-keygen<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="3-服务器ip映射"><a href="#3-服务器ip映射" class="headerlink" title="3.服务器ip映射"></a>3.服务器ip映射</h4><p>使用命令</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span> /etc/hosts<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>添加ip映射,例如47.100.227.19 master 有几台服务器要实现互相免密就添加几个映射</p><h4 id="4-公钥互相拷贝到其他服务器"><a href="#4-公钥互相拷贝到其他服务器" class="headerlink" title="4.公钥互相拷贝到其他服务器"></a>4.公钥互相拷贝到其他服务器</h4><p>1.在master服务器上执行</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ssh-copy-id masterssh-copy-id slave1ssh-copy-id slave2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>2.在slave1上执行</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ssh-copy-id masterssh-copy-id slave1ssh-copy-id slave2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>23.在slave上执行</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ssh-copy-id masterssh-copy-id slave1ssh-copy-id slave2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>注：拷贝的时候是需要输入密码,这也是最后一次输入密码,之后就可以实现免密登录了</p><h1 id="2-Windows与云服务器之间实现免密登录"><a href="#2-Windows与云服务器之间实现免密登录" class="headerlink" title="2.Windows与云服务器之间实现免密登录"></a>2.Windows与云服务器之间实现免密登录</h1><h4 id="1-在Windows主机安装openSSH"><a href="#1-在Windows主机安装openSSH" class="headerlink" title="1.在Windows主机安装openSSH"></a>1.在Windows主机安装openSSH</h4><p><img src="/images/pasted-1.png"><br>出现如图所以表示安装成功</p><h4 id="2-生成公钥"><a href="#2-生成公钥" class="headerlink" title="2.生成公钥"></a>2.生成公钥</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ssh-keygen<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>生成的默认文件路径是C:\Users\ASUS.ssh</p><p>把Windows中的id.rsa.pub的内容追加到云服务器下.ssh/authorized_keys中</p><p>至此就可以实现免密登录了</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;云服务器之间实现免密登录&quot;&gt;&lt;a href=&quot;#云服务器之间实现免密登录&quot; class=&quot;headerlink&quot; title=&quot;云服务器之间实现免密登录&quot;&gt;&lt;/a&gt;云服务器之间实现免密登录&lt;/h1&gt;&lt;h4 id=&quot;1-安装ssh&quot;&gt;&lt;a href=&quot;#1-安装ss</summary>
      
    
    
    
    <category term="技巧经验" scheme="https://myxym-love.github.io/categories/%E6%8A%80%E5%B7%A7%E7%BB%8F%E9%AA%8C/"/>
    
    
    <category term="服务器" scheme="https://myxym-love.github.io/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
  </entry>
  
</feed>
